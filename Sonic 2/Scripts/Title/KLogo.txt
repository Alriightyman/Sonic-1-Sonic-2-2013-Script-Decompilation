//--------------------Sonic 1 / Sonic 2 KLogo Script--------------------//
//--------Scripted by Christian Whitehead 'The Taxman' & Simon Thomley 'Stealth'--------//
//-----------------Unpacked By Rubberduckycooly's Script Unpacker-----------------------//

//-------Aliases-------//
#alias 4: TYPE_KLOGO



sub ObjectMain
	if options.gameMode==0
		if Object.State>2
			CallFunction(STLogo_Function1)
		endif
	endif
	switch Object.State
	case 0
		if Object.Value0==30
			Object[+1].Type=TypeName[TwinkleStars]
			Object[+1].Priority=PRIORITY_ACTIVE
		endif
		if Object.Value0<60
			Object.Value0++
		else
			Object.Value0=0
			Object.Alpha=256
			stage.player2Enabled=0
			Object.State++
		endif
		break
	case 1
		if Object.Alpha>0
			Object.Alpha-=8
		else
			Object.State++
		endif
		break
	case 2
		if Object.Value0<32
			Object.Value0++
		else
			Object.Value0=0
			Object.Value1=-0x2C0000
			Object.Value1+=Object.XPos
			Object.Value2=-0x160000
			Object.Value2+=Object.YPos
			Object.Frame=2
			PlayMusic(0)
			Object.State++
		endif
		break
	case 3
		Object.Value2-=0x80000
		if Object.Value2<=0x1A0000
			Object.State++
		endif
		if Object.Value2==0x3A0000
			Object.Frame++
			Object.Value5=8
			Object.Value6=-0x2C0000
			Object.Value6+=Object.XPos
			Object.Value7=-0x2E0000
			Object.Value7+=Object.YPos
		endif
		break
	case 4
		Object.Value0++
		if Object.Value0==8
			Object.Frame++
			if Object.Frame>=7
				Object.Frame=7
				Object.State++
			endif
			Object.Value0=0
		endif
		break
	case 5
		Object.Value7-=0x10000
		Object.Value0++
		if Object.Value0==4
			Object.Value0=0
			Object.State++
		endif
		break
	case 6
		Object.Value0++
		if Object.Value0==4
			Object.Value0=0
			Object.Value5++
			if Object.Value5==13
				Object.Value5=8
				Object.State++
			endif
		endif
		break
	case 7
		Object.Value7+=0x10000
		Object.Value0++
		if Object.Value0==4
			Object.Value0=0
			Object.State++
		endif
		break
	case 8
		Object.YVelocity+=0x4000
		Object.YPos+=Object.YVelocity
		Object.Value2+=Object.YVelocity
		Object.Value7+=Object.YVelocity
		if Object.YVelocity>0
			if Object.YPos>=0x900000
				Object.YVelocity>>=1
				TempValue0=Object.YVelocity
				TempValue0>>=1
				Object.YVelocity+=TempValue0
				Object.Value0++
				if Object.Value0!=3
					FlipSign(Object.YVelocity)
				else
					Object.Value0=0
					Object.YVelocity=0
					Stage[0].ActiveLayer=2
					Object.Alpha=256
					Object.State++
				endif
			endif
		endif
		break
	case 9
		Object.Value7-=0x10000
		Object.Value0++
		if Object.Value0==4
			Object.Value0=0
			Object.State++
		endif
		if Object.Alpha>0
			Object.Alpha-=12
		endif
		break
	case 10
		Object.Value0++
		if Object.Value0==4
			Object.Value0=0
			Object.Value5++
			if Object.Value5==13
				Object.Value5=8
				Object.State++
			endif
		endif
		if Object.Alpha>0
			Object.Alpha-=12
		endif
		break
	case 11
		if Object.Value0<4
			Object.Value7+=0x10000
			Object.Value0++
			if Object.Alpha>0
				Object.Alpha-=12
			endif
		else
			if Object.Alpha>0
				Object.Alpha-=12
			else
				Object.Value0=0
				Object.State++
				Object[+1].Type=TypeName[StartMessage]
				Object[+1].Priority=PRIORITY_ACTIVE
				Object[+1].XPos=Screen.CenterX
				Object[+1].YPos=200
				CreateTempObject(TypeName[ShootingStar],0,Object.XPos,Object.YPos)
				Object[TempObjectPos].DrawOrder=2
				Object[TempObjectPos].XPos+=0x1600000
				Object[TempObjectPos].YPos-=0x1000000
				Object[TempObjectPos].Value0=150
			endif
		endif
		break
	case 12
		Object.YVelocity+=0x4000
		Object.Value8+=Object.YVelocity
		if Object.YVelocity>0
			if Object.Value8>=0x5A0000
				Object.YVelocity>>=2
				TempValue0=Object.YVelocity
				TempValue0>>=1
				Object.YVelocity+=TempValue0
				Object.Value0++
				if Object.Value0!=2
					FlipSign(Object.YVelocity)
				else
					Object.Value0=0
					Object.YVelocity=0
					Object.State++
				endif
			endif
		endif
		Object.AnimationTimer++
		if Object.AnimationTimer>7
			TileLayer[2].DeformationOffset++
			Object.AnimationTimer=0
		endif
		break
	case 13
		Object.AnimationTimer++
		if Object.AnimationTimer>7
			TileLayer[2].DeformationOffset++
			Object.AnimationTimer=0
		endif
		break
	endswitch
	TempValue0=Screen.CenterX
	FlipSign(TempValue0)
	TempValue0+=256
	Screen.XOffset=TempValue0
endsub


sub ObjectDraw
	switch Object.State
	case 0
		ClearScreen(1)
		break
	case 1
		ClearScreen(1)
		DrawSprite(0)
		DrawSprite(1)
		DrawRect(0,0,Screen.XSize,Screen.YSize,0,0,0,Object.Alpha)
		break
	case 2
		ClearScreen(1)
		DrawSprite(0)
		DrawSprite(1)
		break
	case 3
		ClearScreen(1)
		DrawSprite(0)
		DrawSpriteXY(Object.Frame,Object.Value1,Object.Value2)
		DrawSprite(1)
		break
	case 4
		ClearScreen(1)
		DrawSprite(0)
		DrawSpriteXY(Object.Frame,Object.Value1,Object.Value2)
		if Object.Frame>=7
			DrawSpriteXY(Object.Value5,Object.Value6,Object.Value7)
		endif
		DrawSprite(1)
		break
	case 5
	case 6
	case 7
	case 8
		ClearScreen(1)
		DrawSprite(0)
		DrawSpriteXY(Object.Frame,Object.Value1,Object.Value2)
		DrawSpriteXY(Object.Value5,Object.Value6,Object.Value7)
		DrawSprite(1)
		break
	case 9
	case 10
	case 11
		DrawRect(0,0,Screen.XSize,Screen.YSize,224,224,224,Object.Alpha)
		DrawSprite(0)
		DrawSpriteXY(Object.Frame,Object.Value1,Object.Value2)
		DrawSpriteXY(Object.Value5,Object.Value6,Object.Value7)
		DrawSprite(1)
		TempValue0=Screen.XSize
		TempValue0-=96
		DrawSpriteScreenXY(15,TempValue0,216)
		break
	case 12
	case 13
		DrawSprite(0)
		DrawSpriteXY(Object.Frame,Object.Value1,Object.Value2)
		DrawSpriteXY(Object.Value5,Object.Value6,Object.Value7)
		DrawSprite(1)
		DrawSpriteXY(14,Object.XPos,Object.Value8)
		TempValue0=Screen.XSize
		TempValue0-=96
		DrawSpriteScreenXY(15,TempValue0,216)
		break
	endswitch
endsub


sub ObjectStartup
	LoadSpriteSheet("Title/Title.gif")
	SpriteFrame(-128,-78,256,82,255,67)
	SpriteFrame(-128,-8,256,87,255,150)
	SpriteFrame(3,15,101,47,1,438)
	SpriteFrame(3,15,101,73,1,438)
	SpriteFrame(0,9,95,79,103,432)
	SpriteFrame(1,6,105,82,199,429)
	SpriteFrame(1,4,102,84,305,427)
	SpriteFrame(5,2,91,86,408,425)
	SpriteFrame(8,5,42,43,180,138)
	SpriteFrame(8,3,40,53,465,1)
	SpriteFrame(8,8,40,39,149,182)
	SpriteFrame(8,8,40,39,149,182)
	SpriteFrame(8,3,40,53,465,1)
	SpriteFrame(8,5,42,43,180,138)
	SpriteFrame(-124,-66,248,65,263,359)
	SpriteFrame(0,0,88,16,1,421)
endsub

sub RSDK
	LoadSpriteSheet("Global/Display.gif")
	SetEditorIcon(Icon0,SingleIcon,-16,-16,32,32,1,143)
endsub
