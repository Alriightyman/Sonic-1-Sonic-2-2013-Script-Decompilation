//--------------------Sonic 1 / Sonic 2 STLogo Script--------------------//
//--------Scripted by Christian Whitehead 'The Taxman' & Simon Thomley 'Stealth'--------//
//-----------------Unpacked By Rubberduckycooly's Script Unpacker-----------------------//

//-------Aliases-------//
#alias 3: TYPE_STLOGO

// Function declarations
#function STLogo_Function1

#array STLogo_array0:(4,4,4,4,4,4,4,7,2,2,3,4,4,4,4)
#array STLogo_array1:(4,4,4,4,4,4,7,2,2,2,3,4,4,4)

function STLogo_Function1
	TempValue0=0
	if KeyPress.Up==1
		TempValue0=1
	endif
	if KeyPress.Down==1
		TempValue0=2
	endif
	if KeyPress.Left==1
		TempValue0=3
	endif
	if KeyPress.Right==1
		TempValue0=4
	endif
	if KeyPress.ButtonA==1
		TempValue0=5
	endif
	if KeyPress.ButtonB==1
		TempValue0=6
	endif
	if KeyPress.ButtonC==1
		TempValue0=7
	endif
	switch Object.Value3
	case 0
		if TempValue0==1
			Object.Value3++
		else
			if TempValue0!=0
				Object.Value3=0
			endif
		endif
		break
	case 1
		if TempValue0==1
			Object.Value3++
		else
			if TempValue0!=0
				Object.Value3=0
			endif
		endif
		break
	case 2
		if TempValue0==1
			Object.Value3++
		else
			if TempValue0!=0
				Object.Value3=0
			endif
		endif
		break
	case 3
		if TempValue0==2
			Object.Value3++
		else
			if TempValue0!=0
				Object.Value3=0
			endif
		endif
		break
	case 4
		if TempValue0==2
			Object.Value3++
		else
			if TempValue0!=0
				Object.Value3=0
			endif
		endif
		break
	case 5
		if TempValue0==2
			Object.Value3++
		else
			if TempValue0!=0
				Object.Value3=0
			endif
		endif
		break
	case 6
		if TempValue0==3
			Object.Value3++
		else
			if TempValue0!=0
				Object.Value3=0
			endif
		endif
		break
	case 7
		if TempValue0==4
			Object.Value3++
		else
			if TempValue0!=0
				Object.Value3=0
			endif
		endif
		break
	case 8
		if TempValue0==3
			Object.Value3++
		else
			if TempValue0!=0
				Object.Value3=0
			endif
		endif
		break
	case 9
		if TempValue0==4
			Object.Value3++
			Object.Value3=0
			options.stageSelectFlag=1
			PlaySfx(SFXName[RingL],0)
		else
			if TempValue0!=0
				Object.Value3=0
			endif
		endif
		break
	endswitch
	switch Object.Value4
	case 0
		if TempValue0==1
			Object.Value4++
		else
			if TempValue0!=0
				Object.Value4=0
			endif
		endif
		break
	case 1
	case 2
	case 3
	case 4
		if TempValue0==2
			Object.Value4++
		else
			if TempValue0!=0
				Object.Value4=0
			endif
		endif
		break
	case 5
		if TempValue0==1
			Object.Value4++
			Object.Value4=0
			options.region^=1
			PlaySfx(SFXName[RingL],0)
		else
			if TempValue0!=0
				Object.Value4=0
			endif
		endif
		break
	endswitch
endfunction


sub ObjectMain
	if stage.player2Enabled==1
		Stage.PlayerListPos=3
	endif
	if options.gameMode==0
		if Object.State>2
			CallFunction(STLogo_Function1)
		endif
	endif
	switch Object.State
	case 0
		if Object.Value0==30
			Object[+1].Type=TypeName[TwinkleStars]
			Object[+1].Priority=PRIORITY_ACTIVE
		endif
		if Object.Value0<60
			Object.Value0++
		else
			Object.Value0=0
			Object.Alpha=256
			Object.State++
		endif
		break
	case 1
		if Object.Alpha>0
			Object.Alpha-=8
		else
			Object.State++
		endif
		break
	case 2
		if Object.Value0<32
			Object.Value0++
		else
			Object.Value0=0
			PlayMusic(0)
			Object.State++
		endif
		break
	case 3
		if Object.AnimationTimer<2
			Object.Frame=Object.Value1
			Object.Frame+=2
			GetArrayValue(Object.AnimationTimer,Object.Value1,STLogo_array0)
			Object.Value1++
			if Object.Value1==12
				Object.Frame++
				Object.State++
			endif
		else
			Object.AnimationTimer--
		endif
		break
	case 4
		if Object.AnimationTimer<2
			Object.Frame=Object.Value1
			Object.Frame+=3
			GetArrayValue(Object.AnimationTimer,Object.Value1,STLogo_array0)
			Object.Value1++
			if Object.Value1==16
				Object.AnimationTimer=0
				Object.State++
			endif
		else
			Object.AnimationTimer--
		endif
		break
	case 5
		if Object.Value0<4
			Object.Value0++
		else
			Object.Value0=0
			Object.State++
		endif
		break
	case 6
		if Object.AnimationTimer<2
			Object.Frame=Object.Value2
			Object.Frame+=18
			GetArrayValue(Object.AnimationTimer,Object.Value2,STLogo_array1)
			Object.Value2++
			if Object.Value2==11
				Object.Frame++
				Object.State++
			endif
		else
			Object.AnimationTimer--
		endif
		break
	case 7
		if Object.AnimationTimer<2
			Object.Frame=Object.Value2
			Object.Frame+=19
			GetArrayValue(Object.AnimationTimer,Object.Value2,STLogo_array1)
			Object.Value2++
			if Object.Value2==14
				Object.AnimationTimer=0
				Object.State++
			endif
		else
			Object.AnimationTimer--
		endif
		break
	case 8
		if Object.Value0<30
			Object.Value0++
		else
			Object.Value0=0
			Object.Alpha=256
			Stage[0].ActiveLayer=2
			Object.State++
		endif
		break
	case 9
		if Object.Alpha>0
			Object.Alpha-=12
		else
			Object.State++
			Object[+1].Type=TypeName[StartMessage]
			Object[+1].Priority=PRIORITY_ACTIVE
			Object[+1].XPos=Screen.CenterX
			Object[+1].YPos=208
			CreateTempObject(TypeName[ShootingStar],0,Object.XPos,Object.YPos)
			Object[TempObjectPos].DrawOrder=2
			Object[TempObjectPos].XPos+=0x1600000
			Object[TempObjectPos].YPos-=0x1000000
			Object[TempObjectPos].Value0=90
		endif
		break
	case 10
		Object.Value0++
		if Object.Value0>7
			TileLayer[2].DeformationOffset++
			Object.Value0=0
		endif
		break
	endswitch
	TempValue0=Screen.CenterX
	FlipSign(TempValue0)
	TempValue0+=256
	Screen.XOffset=TempValue0
endsub


sub ObjectDraw
	switch Object.State
	case 0
		ClearScreen(1)
		break
	case 1
		ClearScreen(1)
		DrawSprite(0)
		DrawSprite(1)
		DrawRect(0,0,Screen.XSize,Screen.YSize,0,0,0,Object.Alpha)
		break
	case 2
		ClearScreen(1)
		DrawSprite(0)
		DrawSprite(1)
		break
	case 3
		ClearScreen(1)
		DrawSprite(0)
		DrawSprite(Object.Frame)
		DrawSprite(1)
		break
	case 4
		ClearScreen(1)
		DrawSprite(0)
		DrawSprite(13)
		DrawSprite(Object.Frame)
		DrawSprite(1)
		break
	case 5
		ClearScreen(1)
		DrawSprite(0)
		DrawSprite(13)
		DrawSprite(17)
		DrawSprite(1)
		break
	case 6
		ClearScreen(1)
		DrawSprite(0)
		DrawSprite(Object.Frame)
		DrawSprite(13)
		DrawSprite(17)
		DrawSprite(1)
		break
	case 7
		ClearScreen(1)
		DrawSprite(0)
		DrawSprite(28)
		DrawSprite(Object.Frame)
		DrawSprite(13)
		DrawSprite(17)
		DrawSprite(1)
		break
	case 8
		ClearScreen(1)
		DrawSprite(0)
		DrawSprite(28)
		DrawSprite(31)
		DrawSprite(13)
		DrawSprite(17)
		DrawSprite(1)
		break
	case 9
		DrawRect(0,0,Screen.XSize,Screen.YSize,224,224,224,Object.Alpha)
		DrawSprite(0)
		DrawSprite(28)
		DrawSprite(31)
		DrawSprite(13)
		DrawSprite(17)
		DrawSprite(1)
		TempValue0=Screen.XSize
		TempValue0-=96
		DrawSpriteScreenXY(32,TempValue0,216)
		break
	case 10
		DrawSprite(0)
		DrawSprite(28)
		DrawSprite(31)
		DrawSprite(13)
		DrawSprite(17)
		DrawSprite(1)
		TempValue0=Screen.XSize
		TempValue0-=96
		DrawSpriteScreenXY(32,TempValue0,216)
		break
	endswitch
endsub


sub ObjectStartup
	LoadSpriteSheet("Title/Title.gif")
	SetMusicTrack("Titlescreen.ogg",0,0)
	ArrayPos0=256
	while ArrayPos0<576
		ArrayPos1=ArrayPos0
		ArrayPos1-=256
		Rand(Stage[ArrayPos1].DeformationData2,4)
		TempValue0=ArrayPos0
		TempValue0&=1
		if TempValue0==1
			FlipSign(Stage[ArrayPos1].DeformationData2)
		endif
		Stage[ArrayPos0].DeformationData2=Stage[ArrayPos1].DeformationData2
		ArrayPos0++
	loop
	SpriteFrame(-128,-78,256,82,255,67)
	SpriteFrame(-128,-8,256,87,255,150)
	SpriteFrame(-21,-19,72,40,1,66)
	SpriteFrame(-29,-35,72,67,1,66)
	SpriteFrame(-37,-51,72,67,1,66)
	SpriteFrame(-39,-61,72,67,1,66)
	SpriteFrame(-35,-69,72,67,1,66)
	SpriteFrame(-29,-73,72,67,1,66)
	SpriteFrame(-25,-74,72,67,1,66)
	SpriteFrame(-21,-75,72,67,1,66)
	SpriteFrame(-18,-76,74,84,74,66)
	SpriteFrame(-3,-76,74,71,149,66)
	SpriteFrame(0,-79,71,74,1,134)
	SpriteFrame(0,-79,71,74,74,151)
	SpriteFrame(45,-49,30,43,149,138)
	SpriteFrame(43,-47,30,43,149,138)
	SpriteFrame(40,-46,30,43,149,138)
	SpriteFrame(41,-47,30,43,149,138)
	SpriteFrame(-49,-24,56,64,1,1)
	SpriteFrame(-53,-40,56,64,1,1)
	SpriteFrame(-58,-52,56,64,1,1)
	SpriteFrame(-60,-58,56,64,1,1)
	SpriteFrame(-62,-62,56,64,1,1)
	SpriteFrame(-63,-63,56,64,1,1)
	SpriteFrame(-64,-64,56,64,1,1)
	SpriteFrame(-86,-59,89,57,58,1)
	SpriteFrame(-80,-64,88,61,149,1)
	SpriteFrame(-82,-63,89,59,238,1)
	SpriteFrame(-83,-68,87,65,328,1)
	SpriteFrame(-9,-22,16,19,417,1)
	SpriteFrame(-12,-27,16,19,417,1)
	SpriteFrame(-11,-26,16,19,417,1)
	SpriteFrame(0,0,88,16,1,421)
endsub

sub RSDK
	LoadSpriteSheet("Global/Display.gif")
	SetEditorIcon(Icon0,SingleIcon,-16,-16,32,32,1,143)
endsub
