//--------------------Sonic 1 / Sonic 2 2PVSMenu1 Script--------------------//
//--------Scripted by Christian Whitehead 'The Taxman' & Simon Thomley 'Stealth'--------//
//-----------------Unpacked By Rubberduckycooly's Script Unpacker-----------------------//

//-------Aliases-------//
#alias 9: TYPE_2PVSMENU1

// Function declarations
#function 2PVSMenu1_Function2
#function 2PVSMenu1_Function3



function 2PVSMenu1_Function2
	switch vs.gameLength
	case 0
		EditMenuEntry(MENU_1,"GAME: NO PREFERENCE",0,1)
		break
	case 1
		EditMenuEntry(MENU_1,"GAME: 1 MATCH ",0,1)
		break
	case 2
		EditMenuEntry(MENU_1,"GAME: 2 MATCHES",0,1)
		break
	case 3
		EditMenuEntry(MENU_1,"GAME: 3 MATCHES",0,1)
		break
	case 4
		EditMenuEntry(MENU_1,"GAME: 4 MATCHES",0,1)
		break
	case 5
		EditMenuEntry(MENU_1,"GAME: 5 MATCHES",0,1)
		break
	case 6
		EditMenuEntry(MENU_1,"GAME: 6 MATCHES",0,1)
		break
	case 7
		EditMenuEntry(MENU_1,"GAME: 7 MATCHES",0,1)
		break
	case 8
		EditMenuEntry(MENU_1,"GAME: 8 MATCHES",0,1)
		break

	endswitch
endfunction


function 2PVSMenu1_Function3
	switch vs.itemMode
	case 0
		EditMenuEntry(MENU_1,"ITEMS: NO PREFERENCE",8,1)
		break
	case 1
		EditMenuEntry(MENU_1,"ITEMS: RANDOM",8,1)
		break
	case 2
		EditMenuEntry(MENU_1,"ITEMS: TELEPORT ONLY",8,1)
		break
	case 3
		EditMenuEntry(MENU_1,"ITEMS: FIXED",8,1)
		break

	endswitch
endfunction


sub ObjectMain
	switch Object.State
	case 0
		SetupMenu(MENU_1,0,3,2)
		LoadSpriteSheet("LevelSelect/Icons.gif")
		Object.Value1=Object.SpriteSheet
		LoadSpriteSheet("LevelSelect/Text.gif")
		Object.Value2=Object.SpriteSheet
		if Engine.PlatformID==RETRO_STANDARD
			options.physicalControls=1
		endif
		if options.physicalControls==0
			Menu1.Selection=-1
			Object.Value3=0
		else
			Menu1.Selection=0
			Object.Value3=1
		endif
		AddMenuEntry(MENU_1,"GAME: NO PREFERENCE",1)
		CallFunction(2PVSMenu1_Function2)
		AddMenuEntry(MENU_1,"@",1)
		AddMenuEntry(MENU_1,"@",1)
		AddMenuEntry(MENU_1,"@",1)
		AddMenuEntry(MENU_1,"@",1)
		AddMenuEntry(MENU_1,"@",1)
		AddMenuEntry(MENU_1,"@",1)
		AddMenuEntry(MENU_1,"@",1)
		AddMenuEntry(MENU_1,"ITEMS: NO PREFERENCE",1)
		CallFunction(2PVSMenu1_Function3)
		Object.State++
		break
	case 1
		if options.physicalControls==0
			CheckTouchRect(0,0,Screen.XSize,Screen.YSize)
			if CheckResult>-1
				TempValue0=Screen.CenterX
				TempValue0-=152
				TempValue1=TempValue0
				TempValue1+=38
				CheckTouchRect(TempValue0,72,TempValue1,104)
				if CheckResult>-1
					Object.Value6=1
				else
					Object.Value6=0
				endif
				CheckTouchRect(TempValue0,136,TempValue1,168)
				if CheckResult>-1
					Object.Value7=1
				else
					Object.Value7=0
				endif
				TempValue0=Screen.CenterX
				TempValue0+=116
				TempValue1=TempValue0
				TempValue1+=38
				CheckTouchRect(TempValue0,72,TempValue1,104)
				if CheckResult>-1
					Object.Value8=1
				else
					Object.Value8=0
				endif
				CheckTouchRect(TempValue0,136,TempValue1,168)
				if CheckResult>-1
					Object.Value9=1
				else
					Object.Value9=0
				endif
				TempValue0=Screen.CenterX
				TempValue0+=8
				TempValue1=TempValue0
				TempValue1+=64
				CheckTouchRect(TempValue0,192,TempValue1,224)
				if CheckResult>-1
					Object.Value10=1
				else
					Object.Value10=0
				endif
				TempValue1=Screen.CenterX
				TempValue1-=8
				TempValue0=TempValue1
				TempValue0-=64
				CheckTouchRect(TempValue0,192,TempValue1,224)
				if CheckResult>-1
					Object.Value11=1
				else
					Object.Value11=0
				endif
			else
				if Object.Value6==1
					Object.Value6=0
					vs.gameLength--
					if vs.gameLength<0
						vs.gameLength=8
					endif
					CallFunction(2PVSMenu1_Function2)
					PlaySfx(SFXName[MenuMove],0)
				endif
				if Object.Value7==1
					Object.Value7=0
					vs.itemMode--
					if vs.itemMode<0
						vs.itemMode=3
					endif
					CallFunction(2PVSMenu1_Function3)
					PlaySfx(SFXName[MenuMove],0)
				endif
				if Object.Value8==1
					Object.Value8=0
					vs.gameLength++
					if vs.gameLength>8
						vs.gameLength=0
					endif
					CallFunction(2PVSMenu1_Function2)
					PlaySfx(SFXName[MenuMove],0)
				endif
				if Object.Value9==1
					Object.Value9=0
					vs.itemMode++
					if vs.itemMode>3
						vs.itemMode=0
					endif
					CallFunction(2PVSMenu1_Function3)
					PlaySfx(SFXName[MenuMove],0)
				endif
				if Object.Value10==1
					Object.Value10=0
					Object.State=2
					Object.Value4=0
					PlaySfx(SFXName[MenuSelect],0)
				endif
				if Object.Value11==1
					Object.Value11=0
					Object.State=2
					Object.Value4=1
					PlaySfx(SFXName[MenuBack],0)
				endif
			endif
			if Object.State!=2
				if KeyPress.Up==1
					options.physicalControls=1
					Object.Value3=3
				endif
				if KeyPress.Down==1
					options.physicalControls=1
					Object.Value3=1
				endif
			endif
		else
			if KeyPress.Up==1
				Object.Value3--
				if Object.Value3<1
					Object.Value3=3
				endif
				PlaySfx(SFXName[MenuMove],0)
			endif
			if KeyPress.Down==1
				Object.Value3++
				if Object.Value3>3
					Object.Value3=1
				endif
				PlaySfx(SFXName[MenuMove],0)
			endif
			switch Object.Value3
			case 1
				Menu1.Selection=0
				if KeyPress.Left==1
					vs.gameLength--
					if vs.gameLength<0
						vs.gameLength=8
					endif
					CallFunction(2PVSMenu1_Function2)
					PlaySfx(SFXName[MenuMove],0)
				endif
				if KeyPress.Right==1
					vs.gameLength++
					if vs.gameLength>8
						vs.gameLength=0
					endif
					CallFunction(2PVSMenu1_Function2)
					PlaySfx(SFXName[MenuMove],0)
				endif
				if KeyPress.ButtonB==1
					Menu1.Selection=-1
					Object.Value4=1
					Object.State=2
					PlaySfx(SFXName[MenuBack],0)
				endif
				break
			case 2
				Menu1.Selection=8
				if KeyPress.Left==1
					vs.itemMode--
					if vs.itemMode<0
						vs.itemMode=3
					endif
					CallFunction(2PVSMenu1_Function3)
					PlaySfx(SFXName[MenuMove],0)
				endif
				if KeyPress.Right==1
					vs.itemMode++
					if vs.itemMode>3
						vs.itemMode=0
					endif
					CallFunction(2PVSMenu1_Function3)
					PlaySfx(SFXName[MenuMove],0)
				endif
				if KeyPress.ButtonB==1
					Menu1.Selection=-1
					Object.Value4=1
					Object.State=2
					PlaySfx(SFXName[MenuBack],0)
				endif
				break
			case 3
				Menu1.Selection=-1
				if KeyPress.Left==1
					Object.Value4^=1
					PlaySfx(SFXName[MenuMove],0)
				endif
				if KeyPress.Right==1
					Object.Value4^=1
					PlaySfx(SFXName[MenuMove],0)
				endif
				if KeyPress.Start==1
					Object.State=2
					PlaySfx(SFXName[MenuSelect],0)
				endif
				if KeyPress.ButtonA==1
					Object.State=2
					PlaySfx(SFXName[MenuSelect],0)
				endif
				if KeyPress.ButtonB==1
					Object.Value4=1
					Object.State=2
					PlaySfx(SFXName[MenuBack],0)
				endif
				break

			endswitch
			if Object.State!=2
				CheckTouchRect(0,0,Screen.XSize,Screen.YSize)
				if CheckResult>-1
					options.physicalControls=0
					Object.Value3=0
					Menu1.Selection=-1
				endif
			endif
		endif
		break
	case 2
		if Object.Value5<32
			Object.Value5++
		else
			Object.Value5=0
			if Object.Value4==0
				Object.State=3
			else
				Object.State=4
			endif
		endif
		break
	case 3
		if Object.Value0<256
			Object.Value0+=16
			SetScreenFade(0,0,0,Object.Value0)
		else
			ResetObjectEntity(1,TypeName[2PVSMenu2],0,0,0)
			Object[1].Priority=PRIORITY_ACTIVE
			Object[0].State=1
			Object[0].Value0=384
			SetScreenFade(0,0,0,255)
		endif
		break
	case 4
		if Object.Value0<256
			Music.Volume-=10
			Object.Value0+=16
			SetScreenFade(0,0,0,Object.Value0)
		else
			StopMusic()
			options.vsMode=0
			Engine.State=8
			SetScreenFade(0,0,0,255)
		endif
		break

	endswitch
endsub


sub ObjectDraw
	Object.SpriteSheet=Object.Value1
	DrawSpriteScreenXY(0,Screen.CenterX,17)
	DrawSpriteScreenXY(1,Screen.CenterX,17)
	if Object.Value3==1
		DrawSpriteScreenXY(3,Screen.CenterX,64)
	else
		DrawSpriteScreenXY(2,Screen.CenterX,64)
	endif
	if Object.Value3==2
		DrawSpriteScreenXY(3,Screen.CenterX,128)
	else
		DrawSpriteScreenXY(2,Screen.CenterX,128)
	endif
	switch Object.Value3
	case 0
		if Object.Value6==1
			DrawSpriteScreenXY(5,Screen.CenterX,88)
		else
			DrawSpriteScreenXY(4,Screen.CenterX,88)
		endif
		if Object.Value8==1
			DrawSpriteScreenXY(7,Screen.CenterX,88)
		else
			DrawSpriteScreenXY(6,Screen.CenterX,88)
		endif
		if Object.Value7==1
			DrawSpriteScreenXY(5,Screen.CenterX,152)
		else
			DrawSpriteScreenXY(4,Screen.CenterX,152)
		endif
		if Object.Value9==1
			DrawSpriteScreenXY(7,Screen.CenterX,152)
		else
			DrawSpriteScreenXY(6,Screen.CenterX,152)
		endif
		break
	case 1
		if KeyDown.Left==1
			DrawSpriteScreenXY(5,Screen.CenterX,88)
		else
			DrawSpriteScreenXY(4,Screen.CenterX,88)
		endif
		if KeyDown.Right==1
			DrawSpriteScreenXY(7,Screen.CenterX,88)
		else
			DrawSpriteScreenXY(6,Screen.CenterX,88)
		endif
		break
	case 2
		if KeyDown.Left==1
			DrawSpriteScreenXY(5,Screen.CenterX,152)
		else
			DrawSpriteScreenXY(4,Screen.CenterX,152)
		endif
		if KeyDown.Right==1
			DrawSpriteScreenXY(7,Screen.CenterX,152)
		else
			DrawSpriteScreenXY(6,Screen.CenterX,152)
		endif
		break

	endswitch
	TempValue0=Object.Value5
	TempValue0>>=1
	TempValue0&=1
	if TempValue0==0
		if Object.Value10==1
			DrawSpriteScreenXY(9,Screen.CenterX,210)
		else
			DrawSpriteScreenXY(8,Screen.CenterX,210)
		endif
		if Object.Value11==1
			DrawSpriteScreenXY(11,Screen.CenterX,210)
		else
			DrawSpriteScreenXY(10,Screen.CenterX,210)
		endif
	else
		if Object.Value4==0
			DrawSpriteScreenXY(9,Screen.CenterX,210)
			DrawSpriteScreenXY(10,Screen.CenterX,210)
		else
			DrawSpriteScreenXY(8,Screen.CenterX,210)
			DrawSpriteScreenXY(11,Screen.CenterX,210)
		endif
	endif
	if Object.State<2
		if Object.Value3==3
			if Object.Value4==0
				DrawSpriteScreenXY(12,Screen.CenterX,210)
			else
				DrawSpriteScreenXY(13,Screen.CenterX,210)
			endif
		endif
	endif
	Object.SpriteSheet=Object.Value2
	TempValue0=Screen.CenterX
	TempValue0-=8
	DrawMenu(MENU_1,Screen.CenterX,84)
endsub


sub ObjectStartup
	LoadSpriteSheet("LevelSelect/Icons.gif")
	LoadSpriteSheet("LevelSelect/Text.gif")
	SpriteFrame(-56,0,32,14,185,124)
	SpriteFrame(-8,0,64,14,185,109)
	SpriteFrame(-112,0,224,48,1,151)
	SpriteFrame(-112,0,224,48,1,200)
	SpriteFrame(-142,-10,20,20,138,22)
	SpriteFrame(-142,-10,20,20,138,64)
	SpriteFrame(122,-10,20,20,159,22)
	SpriteFrame(122,-10,20,20,159,64)
	SpriteFrame(20,-10,40,20,1,320)
	SpriteFrame(20,-10,40,20,42,320)
	SpriteFrame(-60,-10,40,20,1,341)
	SpriteFrame(-60,-10,40,20,42,341)
	SpriteFrame(18,-12,42,22,1,362)
	SpriteFrame(-62,-12,42,22,1,362)
	foreach TypeName[2PVSMenu1],ArrayPos0
		Object[ArrayPos0].Priority=PRIORITY_ACTIVE
	floop
endsub

sub RSDK
	LoadSpriteSheet("Global/Display.gif")
	SetEditorIcon(Icon0,SingleIcon,-16,-16,32,32,1,143)
endsub
