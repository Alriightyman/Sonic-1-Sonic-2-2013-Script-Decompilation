//--------------------Sonic 1 / Sonic 2 ConfigScreen Script--------------------//
//--------Scripted by Christian Whitehead 'The Taxman' & Simon Thomley 'Stealth'--------//
//-----------------Unpacked By Rubberduckycooly's Script Unpacker-----------------------//

//-------Aliases-------//
#alias 7: TYPE_CONFIGSCREEN




sub ObjectMain
	switch Object.State
	case 0
		Object.InkEffect=INK_ALPHA
		Object.Alpha=0
		Object.DrawOrder=6
		Object.State++
		break
	case 1
		TempValue0=198
		TempValue0-=Object.Value1
		TempValue0>>=3
		Object.Value1+=TempValue0
		TempValue0=216
		TempValue0-=Object.Value2
		TempValue0>>=3
		Object.Value2+=TempValue0
		if Object.Value1>=188
			Object.Value1=188
			Object.Value2=208
			Object.State++
		endif
		break
	case 2
		if Object.Alpha<256
			Object.Alpha+=16
		else
			if options.physicalControls==1
				Object.Value3=1
			else
				Object.Value3=0
			endif
			Object.State++
		endif
		break
	case 3
		if options.physicalControls==1
			if KeyPress.Up==1
				Object.Value3--
				if Object.Value3<1
					Object.Value3=5
				endif
				PlaySfx(SFXName[MenuMove],0)
			endif
			if KeyPress.Down==1
				Object.Value3++
				if Object.Value3>5
					Object.Value3=1
				endif
				PlaySfx(SFXName[MenuMove],0)
			endif
			switch Object.Value3
			case 1
				if KeyPress.Left==1
					Object.Value4--
					if Object.Value4<0
						Object.Value4=4
					endif
					PlaySfx(SFXName[MenuMove],0)
				endif
				if KeyPress.Right==1
					Object.Value4++
					if Object.Value4>4
						Object.Value4=0
					endif
					PlaySfx(SFXName[MenuMove],0)
				endif
				switch Object.Value4
				case 0
					Stage.PlayerListPos=0
					stage.player2Enabled=1
					break
				case 1
					Stage.PlayerListPos=0
					stage.player2Enabled=0
					break
				case 2
					Stage.PlayerListPos=1
					stage.player2Enabled=0
					break
				case 3
					Stage.PlayerListPos=2
					stage.player2Enabled=0
					break
				case 4
					Stage.PlayerListPos=2
					stage.player2Enabled=1
					break

				endswitch
				break
			case 2
				if KeyPress.Left==1
					options.shieldType--
					if options.shieldType<0
						options.shieldType=3
					endif
					PlaySfx(SFXName[MenuMove],0)
				endif
				if KeyPress.Right==1
					options.shieldType++
					if options.shieldType>3
						options.shieldType=0
					endif
					PlaySfx(SFXName[MenuMove],0)
				endif
				break
			case 3
				if KeyPress.Left==1
					options.tailsFlight^=1
					PlaySfx(SFXName[MenuMove],0)
				endif
				if KeyPress.Right==1
					options.tailsFlight^=1
					PlaySfx(SFXName[MenuMove],0)
				endif
				break
			case 4
				if KeyPress.Left==1
					options.airSpeedCap^=1
					PlaySfx(SFXName[MenuMove],0)
				endif
				if KeyPress.Right==1
					options.airSpeedCap^=1
					PlaySfx(SFXName[MenuMove],0)
				endif
				break
			case 5
				if KeyPress.ButtonA==1
					Object.State=4
					PlaySfx(SFXName[MenuSelect],0)
				endif
				if KeyPress.Start==1
					Object.State=4
					PlaySfx(SFXName[MenuSelect],0)
				endif
				break

			endswitch
			if KeyPress.ButtonB==1
				Object.State=5
				PlaySfx(SFXName[MenuBack],0)
			endif
			if Object.State==3
				CheckTouchRect(0,0,Screen.XSize,Screen.YSize)
				if CheckResult>-1
					options.physicalControls=0
					Object.Value3=0
				endif
			endif
		else
			CheckTouchRect(0,0,Screen.XSize,Screen.YSize)
			if CheckResult>-1
				TempValue0=Screen.CenterX
				TempValue0-=26
				TempValue1=TempValue0
				TempValue1+=38
				CheckTouchRect(TempValue0,36,TempValue1,68)
				if CheckResult>-1
					Object.Value5=1
				else
					Object.Value5=0
				endif
				CheckTouchRect(TempValue0,76,TempValue1,108)
				if CheckResult>-1
					Object.Value6=1
				else
					Object.Value6=0
				endif
				TempValue0=Screen.CenterX
				TempValue0+=58
				TempValue1=TempValue0
				TempValue1+=38
				CheckTouchRect(TempValue0,36,TempValue1,68)
				if CheckResult>-1
					Object.Value7=1
				else
					Object.Value7=0
				endif
				CheckTouchRect(TempValue0,76,TempValue1,108)
				if CheckResult>-1
					Object.Value8=1
				else
					Object.Value8=0
				endif
				TempValue0=Screen.CenterX
				TempValue0-=16
				TempValue1=TempValue0
				TempValue1+=54
				CheckTouchRect(TempValue0,116,TempValue1,148)
				if CheckResult>-1
					Object.Value9=1
				else
					Object.Value9=0
				endif
				CheckTouchRect(TempValue0,156,TempValue1,188)
				if CheckResult>-1
					Object.Value10=1
				else
					Object.Value10=0
				endif
				TempValue0=Screen.CenterX
				TempValue0+=38
				TempValue1=TempValue0
				TempValue1+=54
				CheckTouchRect(TempValue0,116,TempValue1,148)
				if CheckResult>-1
					Object.Value11=1
				else
					Object.Value11=0
				endif
				CheckTouchRect(TempValue0,156,TempValue1,188)
				if CheckResult>-1
					Object.Value12=1
				else
					Object.Value12=0
				endif
				TempValue0=Screen.CenterX
				TempValue0-=27
				TempValue1=TempValue0
				TempValue1+=54
				CheckTouchRect(TempValue0,192,TempValue1,218)
				if CheckResult>-1
					Object.Value13=1
				else
					Object.Value13=0
				endif
			else
				if Object.Value5==1
					Object.Value5=0
					Object.Value4--
					if Object.Value4<0
						Object.Value4=4
					endif
					switch Object.Value4
					case 0
						Stage.PlayerListPos=0
						stage.player2Enabled=1
						break
					case 1
						Stage.PlayerListPos=0
						stage.player2Enabled=0
						break
					case 2
						Stage.PlayerListPos=1
						stage.player2Enabled=0
						break
					case 3
						Stage.PlayerListPos=2
						stage.player2Enabled=0
						break
					case 4
						Stage.PlayerListPos=2
						stage.player2Enabled=1
						break

					endswitch
					PlaySfx(SFXName[MenuMove],0)
				endif
				if Object.Value6==1
					Object.Value6=0
					options.shieldType--
					if options.shieldType<0
						options.shieldType=3
					endif
					PlaySfx(SFXName[MenuMove],0)
				endif
				if Object.Value7==1
					Object.Value7=0
					Object.Value4++
					if Object.Value4>4
						Object.Value4=0
					endif
					switch Object.Value4
					case 0
						Stage.PlayerListPos=0
						stage.player2Enabled=1
						break
					case 1
						Stage.PlayerListPos=0
						stage.player2Enabled=0
						break
					case 2
						Stage.PlayerListPos=1
						stage.player2Enabled=0
						break
					case 3
						Stage.PlayerListPos=2
						stage.player2Enabled=0
						break
					case 4
						Stage.PlayerListPos=2
						stage.player2Enabled=1
						break

					endswitch
					PlaySfx(SFXName[MenuMove],0)
				endif
				if Object.Value8==1
					Object.Value8=0
					options.shieldType++
					if options.shieldType>3
						options.shieldType=0
					endif
					PlaySfx(SFXName[MenuMove],0)
				endif
				if Object.Value9==1
					Object.Value9=0
					options.tailsFlight=1
					PlaySfx(SFXName[MenuMove],0)
				endif
				if Object.Value11==1
					Object.Value11=0
					options.tailsFlight=0
					PlaySfx(SFXName[MenuMove],0)
				endif
				if Object.Value10==1
					Object.Value10=0
					options.airSpeedCap=1
					PlaySfx(SFXName[MenuMove],0)
				endif
				if Object.Value12==1
					Object.Value12=0
					options.airSpeedCap=0
					PlaySfx(SFXName[MenuMove],0)
				endif
				if Object.Value13==1
					Object.Value13=0
					Object.State=4
					PlaySfx(SFXName[MenuSelect],0)
				endif
			endif
			if KeyPress.ButtonB==1
				Object.State=5
				PlaySfx(SFXName[MenuBack],0)
			endif
			if Object.State==3
				if KeyPress.Up==1
					options.physicalControls=1
					Object.Value3=5
				endif
				if KeyPress.Down==1
					options.physicalControls=1
					Object.Value3=1
				endif
			endif
		endif
		break
	case 4
		if Object.Value0<32
			Object.Value0++
		else
			Object.Value0=0
			Object.State++
		endif
		break
	case 5
		if Object.Alpha>0
			Object.Alpha-=16
		else
			Object.State++
		endif
		break
	case 6
		TempValue0=0
		TempValue0-=Object.Value1
		TempValue0>>=3
		Object.Value1+=TempValue0
		TempValue0=0
		TempValue0-=Object.Value2
		TempValue0>>=3
		Object.Value2+=TempValue0
		if Object.Value1<4
			Object.Value1=0
			Object.Value2=0
			MenuControl_constant2=0
			ResetObjectEntity(Object.EntityNo,TypeName[BlankObject],0,0,0)
		endif
		break

	endswitch
endsub


sub ObjectDraw
	TempValue0=Object.Value1
	TempValue0>>=1
	FlipSign(TempValue0)
	TempValue0+=Screen.CenterX
	TempValue1=Object.Value2
	TempValue1>>=1
	FlipSign(TempValue1)
	TempValue1+=Screen.CenterY
	DrawRect(TempValue0,TempValue1,Object.Value1,Object.Value2,0,0,96,255)
	TempValue0+=2
	TempValue1+=2
	TempValue2=Object.Value1
	TempValue2-=4
	TempValue3=Object.Value2
	TempValue3-=4
	DrawRect(TempValue0,TempValue1,TempValue2,TempValue3,0,32,192,255)
	DrawSpriteScreenFX(0,FX_INK,Screen.CenterX,25)
	if Object.Value3==1
		DrawSpriteScreenFX(2,FX_INK,Screen.CenterX,49)
	else
		DrawSpriteScreenFX(1,FX_INK,Screen.CenterX,49)
	endif
	if Object.Value3==2
		DrawSpriteScreenFX(4,FX_INK,Screen.CenterX,89)
	else
		DrawSpriteScreenFX(3,FX_INK,Screen.CenterX,89)
	endif
	if Object.Value3==3
		DrawSpriteScreenFX(6,FX_INK,Screen.CenterX,129)
	else
		DrawSpriteScreenFX(5,FX_INK,Screen.CenterX,129)
	endif
	if Object.Value3==4
		DrawSpriteScreenFX(8,FX_INK,Screen.CenterX,169)
	else
		DrawSpriteScreenFX(7,FX_INK,Screen.CenterX,169)
	endif
	if Object.Value5==1
		DrawSpriteScreenFX(10,FX_INK,Screen.CenterX,43)
	else
		DrawSpriteScreenFX(9,FX_INK,Screen.CenterX,43)
	endif
	if Object.Value7==1
		DrawSpriteScreenFX(12,FX_INK,Screen.CenterX,43)
	else
		DrawSpriteScreenFX(11,FX_INK,Screen.CenterX,43)
	endif
	if Object.Value6==1
		DrawSpriteScreenFX(10,FX_INK,Screen.CenterX,83)
	else
		DrawSpriteScreenFX(9,FX_INK,Screen.CenterX,83)
	endif
	if Object.Value8==1
		DrawSpriteScreenFX(12,FX_INK,Screen.CenterX,83)
	else
		DrawSpriteScreenFX(11,FX_INK,Screen.CenterX,83)
	endif
	if Object.Value9==1
		DrawSpriteScreenFX(14,FX_INK,Screen.CenterX,123)
	else
		DrawSpriteScreenFX(13,FX_INK,Screen.CenterX,123)
	endif
	if Object.Value11==1
		DrawSpriteScreenFX(16,FX_INK,Screen.CenterX,123)
	else
		DrawSpriteScreenFX(15,FX_INK,Screen.CenterX,123)
	endif
	if options.tailsFlight==1
		DrawSpriteScreenFX(19,FX_INK,Screen.CenterX,123)
	else
		DrawSpriteScreenFX(20,FX_INK,Screen.CenterX,123)
	endif
	if Object.Value10==1
		DrawSpriteScreenFX(14,FX_INK,Screen.CenterX,163)
	else
		DrawSpriteScreenFX(13,FX_INK,Screen.CenterX,163)
	endif
	if Object.Value12==1
		DrawSpriteScreenFX(16,FX_INK,Screen.CenterX,163)
	else
		DrawSpriteScreenFX(15,FX_INK,Screen.CenterX,163)
	endif
	if options.airSpeedCap==1
		DrawSpriteScreenFX(19,FX_INK,Screen.CenterX,163)
	else
		DrawSpriteScreenFX(20,FX_INK,Screen.CenterX,163)
	endif
	TempValue0=Object.Value0
	TempValue0>>=1
	TempValue0&=1
	TempValue0+=17
	if Object.Value13==1
		TempValue0=18
	endif
	DrawSpriteScreenFX(TempValue0,FX_INK,Screen.CenterX,195)
	if options.physicalControls==1
		if Object.Value3==5
			if Object.State!=4
				DrawSpriteScreenFX(21,FX_INK,Screen.CenterX,195)
			endif
		endif
	endif
	switch Object.Value4
	case 0
		DrawSpriteScreenFX(22,FX_INK,Screen.CenterX,41)
		DrawSpriteScreenFX(23,FX_INK,Screen.CenterX,41)
		break
	case 1
		DrawSpriteScreenFX(24,FX_INK,Screen.CenterX,41)
		break
	case 2
		DrawSpriteScreenFX(25,FX_INK,Screen.CenterX,41)
		break
	case 3
		DrawSpriteScreenFX(26,FX_INK,Screen.CenterX,41)
		break
	case 4
		DrawSpriteScreenFX(27,FX_INK,Screen.CenterX,41)
		DrawSpriteScreenFX(28,FX_INK,Screen.CenterX,41)
		break

	endswitch
	switch options.shieldType
	case 0
		DrawSpriteScreenFX(29,FX_INK,Screen.CenterX,86)
		break
	case 1
		DrawSpriteScreenFX(30,FX_INK,Screen.CenterX,78)
		break
	case 2
		DrawSpriteScreenFX(31,FX_INK,Screen.CenterX,86)
		break
	case 3
		DrawSpriteScreenFX(30,FX_INK,Screen.CenterX,78)
		DrawSpriteScreenFX(32,FX_INK,Screen.CenterX,78)
		break

	endswitch
endsub


sub ObjectStartup
	LoadSpriteSheet("LevelSelect/Icons.gif")
	SpriteFrame(-52,0,104,7,103,430)
	SpriteFrame(-82,0,48,7,158,454)
	SpriteFrame(-82,0,48,7,207,454)
	SpriteFrame(-82,0,40,7,158,446)
	SpriteFrame(-82,0,40,7,207,446)
	SpriteFrame(-82,0,48,7,158,438)
	SpriteFrame(-82,0,48,7,207,438)
	SpriteFrame(-82,0,56,7,46,378)
	SpriteFrame(-82,0,56,7,199,462)
	SpriteFrame(-16,0,20,20,138,22)
	SpriteFrame(-16,0,20,20,138,64)
	SpriteFrame(64,0,20,20,159,22)
	SpriteFrame(64,0,20,20,159,64)
	SpriteFrame(-8,0,40,20,1,411)
	SpriteFrame(-8,0,40,20,42,411)
	SpriteFrame(44,0,40,20,1,432)
	SpriteFrame(44,0,40,20,42,432)
	SpriteFrame(-20,0,40,20,1,320)
	SpriteFrame(-20,0,40,20,42,320)
	SpriteFrame(-10,-2,42,22,1,362)
	SpriteFrame(42,-2,42,22,1,362)
	SpriteFrame(-22,-2,42,22,1,362)
	SpriteFrame(16,0,16,23,46,386)
	SpriteFrame(36,0,16,23,63,386)
	SpriteFrame(26,0,16,23,46,386)
	SpriteFrame(26,0,16,23,63,386)
	SpriteFrame(26,0,16,23,80,386)
	SpriteFrame(16,0,16,23,80,386)
	SpriteFrame(36,0,16,23,63,386)
	SpriteFrame(26,0,16,14,207,314)
	SpriteFrame(17,0,34,30,207,314)
	SpriteFrame(26,0,16,14,228,299)
	SpriteFrame(17,0,16,14,228,299)
endsub

sub RSDK
	LoadSpriteSheet("Global/Display.gif")
	SetEditorIcon(Icon0,SingleIcon,-16,-16,32,32,1,143)
endsub
