//--------------------Sonic 1 / Sonic 2 CheckeredBall Script--------------------//
//--------Scripted by Christian Whitehead 'The Taxman' & Simon Thomley 'Stealth'--------//
//-----------------Unpacked By Rubberduckycooly's Script Unpacker-----------------------//

//-------Aliases-------//
#alias 65: TYPE_CHECKEREDBALL

// Function declarations
#function CheckeredBall_Function136
#function CheckeredBall_Function137
#function CheckeredBall_Function138
#function CheckeredBall_Function139
#function CheckeredBall_Function140
#function CheckeredBall_Function141
#function CheckeredBall_Function142
#function CheckeredBall_Function143
#function CheckeredBall_Function144


#array CheckeredBall_array48:(0,0,0,0,1,1,1,1,2,2,3,3,4,4,5,6,7,8,9,10,12,14,16,20)

//Unknown Variables
#static 24:staticVar0x14C0B
#static 253:staticVar0x14C0C
#static 251:staticVar0x14C0D
#static 248:staticVar0x14C0E
#static 245:staticVar0x14C0F
#static 243:staticVar0x14C10
#static 240:staticVar0x14C11
#static 237:staticVar0x14C12
#static 235:staticVar0x14C13
#static 232:staticVar0x14C14
#static 229:staticVar0x14C15
#static 226:staticVar0x14C16
#static 224:staticVar0x14C17
#static 221:staticVar0x14C18
#static 219:staticVar0x14C19
#static 216:staticVar0x14C1A
#static 213:staticVar0x14C1B
#static 210:staticVar0x14C1C
#static 208:staticVar0x14C1D
#static 205:staticVar0x14C1E
#static 203:staticVar0x14C1F
#static 200:staticVar0x14C20
#static 197:staticVar0x14C21
#static 195:staticVar0x14C22
#static 192:staticVar0x14C23

function CheckeredBall_Function136
	DrawSprite(1)
endfunction


function CheckeredBall_Function137
	CreateTempObject(TypeName[CheckeredBall],0,Object.XPos,Object.YPos)
	Object[TempObjectPos].Gravity=GRAVITY_AIR
	Object[TempObjectPos].Value7=Object.XPos
	Object[TempObjectPos].Value8=Object.YPos
	Object[TempObjectPos].Value1=Object.XPos
	Object[TempObjectPos].Value2=Object.YPos
endfunction


function CheckeredBall_Function138
	Object.Value10=0
	TempValue2=0
	foreach TypeGroup[256],PlayerObjectPos
		CheckEqual(options.attractMode,1)
		TempValue1=CheckResult
		CheckEqual(PlayerObjectPos,1)
		TempValue1&=CheckResult
		TempValue0=Object[PlayerObjectPos].Value21
		TempValue0>>=1
		if Object[PlayerObjectPos].Gravity==GRAVITY_GROUND
			if Object[PlayerObjectPos].XVelocity<0
				PlayerObjectCollision(C_TOUCH,Object.EntityNo,0,-14,15,14,PlayerObjectPos,0x10000,0x10000,0x10000,0x10000)
				if CheckResult==1
					if Object[PlayerObjectPos].Left==1
						if TempValue1==0
							SetBit(Object.Value10,TempValue2,1)
							TempValue1=Object[PlayerObjectPos].Value20
							FlipSign(TempValue1)
							if Object.Speed>TempValue1
								Object.Speed-=TempValue0
							endif
							Object.Value6=1
						endif
						Object[PlayerObjectPos].XPos=Object[PlayerObjectPos].CollisionRight
						Object[PlayerObjectPos].XPos+=14
						Object[PlayerObjectPos].XPos<<=16
						Object[PlayerObjectPos].XPos+=Object.Value1
						if Object.XVelocity<0
							if Object[PlayerObjectPos].Speed<Object.Speed
								Object[PlayerObjectPos].XVelocity=Object.XVelocity
								Object[PlayerObjectPos].Speed=Object.Speed
							endif
						endif
						Object[PlayerObjectPos].Pushing=2
					endif
				endif
			else
				if Object[PlayerObjectPos].XVelocity>0
					PlayerObjectCollision(C_TOUCH,Object.EntityNo,-15,-14,0,14,PlayerObjectPos,0x10000,0x10000,0x10000,0x10000)
					if CheckResult==1
						if Object[PlayerObjectPos].Right==1
							if TempValue1==0
								SetBit(Object.Value10,TempValue2,1)
								if Object.Speed<Object[PlayerObjectPos].Value20
									Object.Speed+=TempValue0
								endif
								Object.Value6=1
							endif
							Object[PlayerObjectPos].XPos=Object[PlayerObjectPos].CollisionLeft
							Object[PlayerObjectPos].XPos+=-14
							Object[PlayerObjectPos].XPos<<=16
							Object[PlayerObjectPos].XPos+=Object.Value1
							if Object.XVelocity>0
								if Object[PlayerObjectPos].Speed>Object.Speed
									Object[PlayerObjectPos].XVelocity=Object.XVelocity
									Object[PlayerObjectPos].Speed=Object.Speed
								endif
							endif
							Object[PlayerObjectPos].Pushing=2
						endif
					endif
				endif
			endif
		endif
		TempValue2++
	floop
endfunction


function CheckeredBall_Function139
	TempValue6=Object.XPos
	TempValue6&=-0x10000
	TempValue6-=Object.Value1
	TempValue7=Object.YPos
	TempValue7&=-0x10000
	TempValue7-=Object.Value2
	TempValue4=Object.XPos
	TempValue5=Object.YPos
	Object.XPos=Object.Value1
	Object.YPos=Object.Value2
	TempValue2=0
	foreach TypeGroup[256],PlayerObjectPos
		PlayerObjectCollision(C_TOUCH,Object.EntityNo,-2,-2,2,2,PlayerObjectPos,0x10000,0x10000,0x10000,0x10000)
		if CheckResult==0
			GetBit(TempValue0,Object.Value10,TempValue2)
			if TempValue0==1
				if Object[PlayerObjectPos].XPos<Object.XPos
					TempValue1=Object[PlayerObjectPos].CollisionRight
					FlipSign(TempValue1)
					TempValue1-=14
				else
					TempValue1=Object[PlayerObjectPos].CollisionLeft
					FlipSign(TempValue1)
					TempValue1+=14
				endif
				TempValue1<<=16
				Object[PlayerObjectPos].XPos=TempValue1
				Object[PlayerObjectPos].XPos+=TempValue4
			else
				PlayerObjectCollision(C_BOX,Object.EntityNo,-14,-14,14,14,PlayerObjectPos,0x10000,0x10000,0x10000,0x10000)
				if CheckResult==1
					Object[PlayerObjectPos].XPos+=TempValue6
					TempValue0=TempValue6
					TempValue0>>=1
					Object[PlayerObjectPos].XPos+=TempValue0
					Object[PlayerObjectPos].YPos+=TempValue7
					if Object[PlayerObjectPos].XVelocity!=0
						TempValue0=Object[PlayerObjectPos].Value21
						TempValue0>>=2
						if Object[PlayerObjectPos].XVelocity>0
							FlipSign(TempValue0)
						endif
					else
						TempValue0=0
					endif
					Object.Speed+=TempValue0
					if TempValue0!=0
						Object.Value6=1
					endif
					Object.XPos=TempValue4
					Object.YPos=TempValue5
					PlayerObjectCollision(C_BOX,Object.EntityNo,-14,-14,14,14,PlayerObjectPos,0x10000,0x10000,0x10000,0x10000)
					Object.XPos=Object.Value1
					Object.YPos=Object.Value2
					if CheckResult==0
						TempValue0=TempValue6
						TempValue1=TempValue6
						TempValue0>>=1
						TempValue1+=TempValue0
						Object[PlayerObjectPos].Speed+=TempValue0
						Object[PlayerObjectPos].XVelocity=Object[PlayerObjectPos].Speed
						Object[PlayerObjectPos].Gravity=GRAVITY_AIR
						Object[PlayerObjectPos].ControlLock=15
					endif
				endif
				if CheckResult==4
					if Object.YVelocity>=0
						if Object[PlayerObjectPos].Gravity==GRAVITY_GROUND
							CallFunction(PlayerObject_Function50)
						endif
					endif
				endif
			endif
			TempValue2++
		endif
	floop
	Object.XPos=TempValue4
	Object.YPos=TempValue5
endfunction


function CheckeredBall_Function140
	TempValue0=Object.XVelocity
	TempValue0|=Object.YVelocity
	if TempValue0!=0
		ResetObjectEntity(Object[ArrayPos0].EntityNo,TypeName[BlankObject],0,Object[ArrayPos0].XPos,Object[ArrayPos0].YPos)
		Rand(CheckResult,32)
		if CheckResult>15
			CreateTempObject(animalType1,0,Object[ArrayPos0].XPos,Object[ArrayPos0].YPos)
		else
			CreateTempObject(animalType2,0,Object[ArrayPos0].XPos,Object[ArrayPos0].YPos)
		endif
		Object[TempObjectPos].Priority=PRIORITY_UNKNOWN
		CreateTempObject(TypeName[SmokePuff],0,Object[ArrayPos0].XPos,Object[ArrayPos0].YPos)
		Object[TempObjectPos].DrawOrder=4
		CreateTempObject(TypeName[ObjectScore],Object.Value11,Object[ArrayPos0].XPos,Object[ArrayPos0].YPos)
		Object[TempObjectPos].DrawOrder=4
		PlaySfx(SFXName[Destroy],0)
		switch Object.Value11
		case 0
			player.score+=100
			break
		case 1
			player.score+=200
			break
		case 2
			player.score+=500
			break
		case 3
		case 4
		case 5
		case 6
		case 7
		case 8
		case 9
		case 10
		case 11
		case 12
		case 13
		case 14
			player.score+=1000
			break
		case 15
			player.score+=0x2710
			break
		endswitch
		if Object.Value11<15
			Object.Value11++
		endif
	endif
endfunction


function CheckeredBall_Function141
	TempValue0=Object.XPos
	TempValue0-=Object[ArrayPos0].XPos
	TempValue1=Object.YPos
	TempValue1-=Object[ArrayPos0].YPos
	ATan2(TempValue2,TempValue0,TempValue1)
	Sin256(TempValue0,TempValue2)
	Cos256(TempValue1,TempValue2)
	Object[ArrayPos0].XVelocity=TempValue1
	Object[ArrayPos0].XVelocity*=-0x800
	Object[ArrayPos0].YVelocity=TempValue0
	Object[ArrayPos0].YVelocity*=-0x800
endfunction


function CheckeredBall_Function142
	switch Object[ArrayPos0].PropertyValue
	case 0
		TempValue0=Object[ArrayPos0].Value1
		if Object.Gravity==GRAVITY_AIR
			TempValue0=1
		endif
		if Object.CollisionMode>CMODE_FLOOR
			if Object.YVelocity<0
				TempValue0=1
			endif
		endif
		if TempValue0==0
			PlayerObjectCollision(C_BOX,Object[ArrayPos0].EntityNo,-14,-8,14,8,Object.EntityNo,-14,-14,14,14)
			PlayerObjectCollision(C_TOUCH,Object[ArrayPos0].EntityNo,-14,-10,14,-6,Object.EntityNo,-14,-14,14,14)
			if CheckResult==1
				Object[ArrayPos0].Value0=1
				Object.TileCollisions=1
				Object.Gravity=GRAVITY_AIR
				Object.Speed=Object.XVelocity
				Object.YVelocity=TempValue7
				FlipSign(Object.YVelocity)
				Object.YVelocity+=Object[ArrayPos0].Value2
				PlaySfx(SFXName[Spring],0)
			endif
		else
			if Object.YVelocity>=0
				PlayerObjectCollision(C_PLATFORM,Object[ArrayPos0].EntityNo,-14,-8,14,8,Object.EntityNo,-14,-14,14,14)
				PlayerObjectCollision(C_TOUCH,Object[ArrayPos0].EntityNo,-14,-10,14,-6,Object.EntityNo,-14,-14,14,14)
				if CheckResult==1
					Object[ArrayPos0].Value0=1
					Object.TileCollisions=1
					Object.Gravity=GRAVITY_AIR
					Object.Speed=Object.XVelocity
					Object.YVelocity=TempValue7
					FlipSign(Object.YVelocity)
					Object.YVelocity+=Object[ArrayPos0].Value2
					PlaySfx(SFXName[Spring],0)
				endif
			endif
		endif
		break
	case 1
		PlayerObjectCollision(C_BOX,Object[ArrayPos0].EntityNo,-8,-14,8,14,Object.EntityNo,-14,-14,14,14)
		if Object.Gravity==GRAVITY_GROUND
			PlayerObjectCollision(C_TOUCH,Object[ArrayPos0].EntityNo,6,-14,10,14,Object.EntityNo,-14,-14,14,14)
			if CheckResult==1
				Object[ArrayPos0].Value0=1
				Object.TileCollisions=1
				Object.Speed=TempValue7
				Object.CollisionMode=CMODE_FLOOR
				Object.Direction=FLIP_NONE
				PlaySfx(SFXName[Spring],0)
			endif
		endif
		break
	case 2
		PlayerObjectCollision(C_BOX,Object[ArrayPos0].EntityNo,-8,-14,8,14,Object.EntityNo,-14,-14,14,14)
		if Object.Gravity==GRAVITY_GROUND
			PlayerObjectCollision(C_TOUCH,Object[ArrayPos0].EntityNo,-10,-14,-6,14,Object.EntityNo,-14,-14,14,14)
			if CheckResult==1
				Object[ArrayPos0].Value0=1
				Object.TileCollisions=1
				Object.Speed=TempValue7
				FlipSign(Object.Speed)
				Object.CollisionMode=CMODE_FLOOR
				Object.Direction=FLIP_X
				PlaySfx(SFXName[Spring],0)
			endif
		endif
		break
	case 3
		PlayerObjectCollision(C_BOX,Object[ArrayPos0].EntityNo,-14,-8,14,8,Object.EntityNo,-14,-14,14,14)
		PlayerObjectCollision(C_TOUCH,Object[ArrayPos0].EntityNo,-14,6,14,10,Object.EntityNo,-14,-14,14,14)
		if CheckResult==1
			Object[ArrayPos0].Value0=1
			if Object.CollisionMode==CMODE_ROOF
				FlipSign(Object.Speed)
				FlipSign(Object.XVelocity)
			endif
			Object.TileCollisions=1
			Object.Gravity=GRAVITY_AIR
			Object.Speed=Object.XVelocity
			Object.YVelocity=TempValue7
			PlaySfx(SFXName[Spring],0)
		endif
		break
	endswitch
endfunction


function CheckeredBall_Function143
	if Object[ArrayPos0].State<3
		player.score++
		if Object[ArrayPos0].PropertyValue<2
			if Object.YVelocity>=0
				PlayerObjectCollision(C_PLATFORM,ArrayPos0,-64,-24,64,0,Object.EntityNo,-10,-14,10,14)
			else
				CheckResult=0
			endif
		else
			PlayerObjectCollision(C_BOX,ArrayPos0,-64,-16,64,16,Object.EntityNo,-10,-14,10,14)
		endif
		if CheckResult==1
			if Object[ArrayPos0].State==0
				Object[ArrayPos0].State=1
				Object[ArrayPos0].Priority=PRIORITY_ACTIVE
			endif
		endif
	endif
endfunction


function CheckeredBall_Function144
	if Object.Gravity==GRAVITY_AIR
		Object.YVelocity+=0x3800
		Object.Speed=Object.XVelocity
	else
		Sin256(TempValue0,Object.Value4)
		TempValue0*=0x2000
		TempValue0>>=8
		Object.Speed+=TempValue0
		Object.Value5=Object.Speed
		if TempValue0==0
			if Object.Value6==0
				if Object.Speed>0
					Object.Speed-=0x400
					if Object.Speed<0
						Object.Speed=0
					endif
				else
					Object.Speed+=0x400
					if Object.Speed>0
						Object.Speed=0
					endif
				endif
			endif
		endif
		Cos256(TempValue0,Object.Value4)
		TempValue0*=Object.Speed
		TempValue0>>=8
		Object.XVelocity=TempValue0
		Sin256(TempValue0,Object.Value4)
		TempValue0*=Object.Speed
		TempValue0>>=8
		Object.YVelocity=TempValue0
	endif
	Object.Value6=0
endfunction


sub ObjectMain
	if Object.State==0
		Object.Priority=PRIORITY_ACTIVE
		CallFunction(CheckeredBall_Function138)
		Object.Value3+=Object.Value5
		Object.CollisionLeft=-14
		Object.CollisionTop=-14
		Object.CollisionRight=14
		Object.CollisionBottom=14
		CallFunction(CheckeredBall_Function144)
		PlayerTileCollision()
		Object.Value4=Object.Angle
	else
		Object.CollisionLeft=-14
		Object.CollisionTop=-14
		Object.CollisionRight=14
		Object.CollisionBottom=14
		PlayerTileCollision()
		Object.Value3+=0x40000
	endif
	foreach TypeGroup[0],ArrayPos0
		switch Object[ArrayPos0].Type
		case 55
			PlayerObjectCollision(C_TOUCH,Object.EntityNo,-14,-14,14,14,ArrayPos0,-16,-12,16,12)
			if CheckResult==1
				CallFunction(CheckeredBall_Function140)
			endif
			break
		case 57
			PlayerObjectCollision(C_TOUCH,Object.EntityNo,-14,-14,14,14,ArrayPos0,-16,-10,16,10)
			if CheckResult==1
				CallFunction(CheckeredBall_Function140)
			endif
			break
		case 56
			PlayerObjectCollision(C_TOUCH,Object.EntityNo,-14,-14,14,14,ArrayPos0,-4,-4,4,4)
			if CheckResult==1
				CallFunction(CheckeredBall_Function141)
			endif
			break
		case 58
			PlayerObjectCollision(C_TOUCH,Object.EntityNo,-14,-14,14,14,ArrayPos0,-4,-4,4,4)
			if CheckResult==1
				CallFunction(CheckeredBall_Function141)
			endif
			break
		case 13
			PlayerObjectCollision(C_TOUCH,Object.EntityNo,-14,-14,14,14,ArrayPos0,-16,-14,16,16)
			if CheckResult==1
				Object[ArrayPos0].State=0
				CreateTempObject(TypeName[SmokePuff],0,Object[ArrayPos0].XPos,Object[ArrayPos0].YPos)
				Object[TempObjectPos].DrawOrder=4
				Object[ArrayPos0].Type=TypeName[BrokenMonitor]
				if Object[ArrayPos0].Priority!=PRIORITY_XBOUNDS_DESTROY
					Object[ArrayPos0].Priority=PRIORITY_ACTIVE
				endif
				Object[ArrayPos0].Alpha=255
				Object[ArrayPos0].Value0=Object[ArrayPos0].YPos
				Object[ArrayPos0].Value1=-0x30000
				PlaySfx(SFXName[Destroy],0)
			endif
			break
		case 17
			switch Object[ArrayPos0].PropertyValue
			case 0
				PlayerObjectCollision(C_BOX,ArrayPos0,-16,-16,16,16,Object.EntityNo,-14,-14,14,14)
				break
			case 1
				PlayerObjectCollision(C_BOX,ArrayPos0,-16,-16,15,16,Object.EntityNo,-14,-14,14,14)
				break
			case 2
				PlayerObjectCollision(C_BOX,ArrayPos0,-15,-16,16,16,Object.EntityNo,-14,-14,14,14)
				break
			case 3
				PlayerObjectCollision(C_BOX,ArrayPos0,-16,-16,16,15,Object.EntityNo,-14,-14,14,14)
				break
			endswitch
			switch CheckResult
			case 1
				Object.Gravity=GRAVITY_GROUND
				break
			case 2
				if Object.Speed>0
					Object.Speed=0
				endif
				break
			case 3
				if Object.Speed<0
					Object.Speed=0
				endif
				break
			endswitch
			break
		case 16
			TempValue7=0xA0000
			CallFunction(CheckeredBall_Function142)
			break
		case 15
			TempValue7=0x100000
			CallFunction(CheckeredBall_Function142)
			break
		case 50
			TempValue0=Object[ArrayPos0].Value1
			TempValue0-=Object[ArrayPos0].Value2
			TempValue0>>=16
			TempValue0-=20
			PlayerObjectCollision(C_BOX,ArrayPos0,-16,TempValue0,16,20,Object.EntityNo,-10,-14,10,14)
			if CheckResult==1
				Object[ArrayPos0].Value3|=1
				Object.YPos+=Object[ArrayPos0].Value2
				if Object[ArrayPos0].State==2
					if Object[ArrayPos0].Value1==0x120000
						Object.Gravity=GRAVITY_AIR
						Object.YVelocity=-0x60000
						Object.Value0=0
						PlaySfx(SFXName[Spring],0)
					endif
				endif
			endif
			break
		case 51
			if Object[ArrayPos0].Direction==FLIP_NONE
				TempValue0=-20
				TempValue1=Object[ArrayPos0].Value1
				TempValue1>>=16
				FlipSign(TempValue1)
				TempValue1+=22
			else
				TempValue0=Object[ArrayPos0].Value1
				TempValue0>>=16
				TempValue0-=22
				TempValue1=20
			endif
			TempValue2=Object.Speed
			PlayerObjectCollision(C_BOX,ArrayPos0,TempValue0,-16,TempValue1,16,Object.EntityNo,-10,-14,10,14)
			Object.Speed=TempValue2
			switch CheckResult
			case 2
				TempValue0>>=8
				Object.Speed-=TempValue0
				if Object.Speed>0
					Object[ArrayPos0].Value2|=1
				endif
				if Object[ArrayPos0].State==1
					if Object[ArrayPos0].Value1>0x10000
						Object.Speed=-12
						Object.Speed*=Object[ArrayPos0].Value1
						Object.Speed/=18
						Object.CollisionMode=CMODE_FLOOR
						PlaySfx(SFXName[Spring],0)
					endif
				endif
				break
			case 3
				TempValue0>>=5
				Object.Speed-=TempValue0
				if Object.Speed<0
					Object[ArrayPos0].Value2|=1
				endif
				if Object[ArrayPos0].State==1
					if Object[ArrayPos0].Value1>0x10000
						Object.Speed=12
						Object.Speed*=Object[ArrayPos0].Value1
						Object.Speed/=18
						PlaySfx(SFXName[Spring],0)
					endif
				endif
				break
			endswitch
			break
		case 52
			PlayerObjectCollision(C_TOUCH,ArrayPos0,-4,-4,4,4,Object.EntityNo,-10,-14,10,14)
			if CheckResult==1
				TempValue0=1
				TempValue0<<=5
				TempValue0&=Object[ArrayPos0].Value5
				if TempValue0==0
					Object.State=1
					Object.XPos=Object[ArrayPos0].XPos
					Object.YPos=Object[ArrayPos0].YPos
					Object.Speed=0
					Object.XVelocity=0
					Object.YVelocity=0
					Object.Visible=0
					Object.TileCollisions=0
					TempValue0=1
					TempValue0<<=5
					Object[ArrayPos0].Value5|=TempValue0
					Object[ArrayPos0].Value0=0
					Object[ArrayPos0].Value1=0
					Object[ArrayPos0].State=1
					if Object[ArrayPos0].Priority!=PRIORITY_XBOUNDS_DESTROY
						Object[ArrayPos0].Priority=PRIORITY_ACTIVE
					endif
					Object.Value15=ArrayPos0
					PlaySfx(SFXName[Rolling],0)
				endif
			endif
			break
		case 44
			TempValue0=Object[ArrayPos0].YPos
			Object[ArrayPos0].YPos=Object[ArrayPos0].Value1
			PlayerObjectCollision(C_BOX,ArrayPos0,-32,8,32,48,Object.EntityNo,-10,-14,10,14)
			PlayerObjectCollision(C_BOX,ArrayPos0,-16,0,16,24,Object.EntityNo,-10,-14,10,14)
			Object[ArrayPos0].YPos=TempValue0
			Object[ArrayPos0].YPos-=Object[ArrayPos0].Value2
			PlayerObjectCollision(C_PLATFORM,ArrayPos0,-24,-8,24,12,Object.EntityNo,-10,-14,10,14)
			if CheckResult==1
				Object.Value13=Object[ArrayPos0].Value2
			endif
			Object[ArrayPos0].YPos+=Object[ArrayPos0].Value2
			break
		case 45
			Object[ArrayPos0].YPos-=Object[ArrayPos0].Value4
			if Object[ArrayPos0].Frame==0
				PlayerObjectCollision(C_PLATFORM,ArrayPos0,-64,-12,64,12,Object.EntityNo,-10,-14,10,14)
			else
				PlayerObjectCollision(C_PLATFORM,ArrayPos0,-32,-12,32,12,Object.EntityNo,-10,-14,10,14)
			endif
			if CheckResult==1
				Object.Value13=Object[ArrayPos0].Value4
			endif
			Object[ArrayPos0].YPos+=Object[ArrayPos0].Value4
			break
		case 46
			TempValue0=Object[ArrayPos0].XPos
			TempValue1=Object[ArrayPos0].YPos
			Object[ArrayPos0].XPos=Object[ArrayPos0].Value1
			Object[ArrayPos0].YPos=Object[ArrayPos0].Value2
			Object[ArrayPos0].XPos-=Object[ArrayPos0].Value3
			Object[ArrayPos0].YPos-=Object[ArrayPos0].Value4
			PlayerObjectCollision(C_PLATFORM,Object[ArrayPos0].EntityNo,-32,-8,32,8,Object.EntityNo,-10,-14,10,14)
			if CheckResult==1
				Object.Value12=Object[ArrayPos0].Value3
				Object.Value13=Object[ArrayPos0].Value4
			endif
			Object[ArrayPos0].XPos=TempValue0
			Object[ArrayPos0].YPos=TempValue1
			break
		case 43
			CallFunction(CheckeredBall_Function143)
			break
		case 36
			CheckEqual(Object[ArrayPos0].Value6,0)
			TempValue0=CheckResult
			CheckEqual(Object.Gravity,GRAVITY_GROUND)
			TempValue0|=CheckResult
			if TempValue0==1
				PlayerObjectCollision(C_TOUCH,Object[ArrayPos0].EntityNo,-12,Object[ArrayPos0].Value0,12,Object[ArrayPos0].Value1,Object.EntityNo,-2,-14,2,14)
				if CheckResult==1
					if Object.XVelocity>0
						Object.CollisionPlane=Object[ArrayPos0].Value3
						Object.DrawOrder=Object[ArrayPos0].Value5
					else
						Object.CollisionPlane=Object[ArrayPos0].Value2
						Object.DrawOrder=Object[ArrayPos0].Value4
					endif
				endif
			endif
			break
		case 35
			CheckEqual(Object[ArrayPos0].Value6,0)
			TempValue0=CheckResult
			CheckEqual(Object.Gravity,GRAVITY_GROUND)
			TempValue0|=CheckResult
			if TempValue0==1
				PlayerObjectCollision(C_TOUCH,Object[ArrayPos0].EntityNo,Object[ArrayPos0].Value0,-12,Object[ArrayPos0].Value1,12,Object.EntityNo,-14,-2,14,2)
				if CheckResult==1
					if Object.YVelocity>0
						Object.CollisionPlane=Object[ArrayPos0].Value3
						Object.DrawOrder=Object[ArrayPos0].Value5
					else
						Object.CollisionPlane=Object[ArrayPos0].Value2
						Object.DrawOrder=Object[ArrayPos0].Value4
					endif
				endif
			endif
			break
		case 60
			if Object[ArrayPos0].Value3!=0
				if Object[ArrayPos0].Visible==1
					if Object[ArrayPos0].Value4==0
						PlayerObjectCollision(C_TOUCH,ArrayPos0,-24,-10,24,24,Object.EntityNo,-14,-14,14,14)
						if CheckResult==1
							Object[ArrayPos0].Value3--
							if Object[ArrayPos0].Value3==0
								player.score+=1000
								Object[ArrayPos0].AnimationTimer=0
								Object[ArrayPos0].Animation=4
								Object[ArrayPos0].Value5=1
								Object[ArrayPos0].Value0=0
								Object[ArrayPos0].State=7
								SetPaletteEntry(0,192,0)
							else
								Object[ArrayPos0].AnimationTimer=0
								Object[ArrayPos0].Animation=3
								Object[ArrayPos0].Value4=64
								Object[ArrayPos0].Value9=1
								PlaySfx(SFXName[BossHit],0)
							endif
						endif
					endif
				endif
			endif
			break
		case 66
			if Object[ArrayPos0].Frame==0
				PlayerObjectCollision(C_BOX,ArrayPos0,-14,-6,14,12,Object.EntityNo,-14,-14,14,14)
				if CheckResult==1
					Object[ArrayPos0].Value1=1
					Object[ArrayPos0].Value0=1
					Object.YPos+=0x9C40
					PlaySfx(SFXName[ButtonPress],0)
				endif
			else
				if Object.YVelocity>=0
					PlayerObjectCollision(C_PLATFORM,ArrayPos0,-14,-6,14,12,Object.EntityNo,-14,-14,14,14)
					if CheckResult==1
						Object[ArrayPos0].Value1=1
						Object.YPos+=0x20000
					else
						PlayerObjectCollision(C_TOUCH,ArrayPos0,-20,-12,20,8,Object.EntityNo,-14,-14,14,14)
						if CheckResult==1
							Object.YPos=Object.CollisionBottom
							FlipSign(Object.YPos)
							Object.YPos<<=16
							Object.YPos+=Object[ArrayPos0].YPos
							Object.YPos-=0x20000
							Object.Gravity=GRAVITY_AIR
						endif
					endif
				endif
			endif
			break
		case 65
			if ArrayPos0!=Object.EntityNo
				TempValue0=Object.XPos
				TempValue0-=Object[ArrayPos0].XPos
				Absolute(TempValue0)
				TempValue0>>=17
				if TempValue0>=16
					TempValue0=15
				endif
				GetArrayValue(TempValue6,TempValue0,CheckeredBall_array48)
				TempValue0=TempValue6
				TempValue0>>=1
				TempValue6+=TempValue0
				TempValue6-=14
				TempValue7=TempValue6
				FlipSign(TempValue7)
				TempValue0=Object.XVelocity
				TempValue1=Object.YVelocity
				TempValue2=Object.Speed
				PlayerObjectCollision(C_BOX,ArrayPos0,-14,TempValue6,14,TempValue7,Object.EntityNo,-14,-14,14,14)
				switch CheckResult
				case 2
				case 3
					CheckGreater(TempValue0,0)
					TempValue3=CheckResult
					CheckLower(Object.XPos,Object[ArrayPos0].XPos)
					TempValue3&=CheckResult
					CheckLower(TempValue0,0)
					TempValue4=CheckResult
					CheckGreater(Object.XPos,Object[ArrayPos0].XPos)
					TempValue4&=CheckResult
					TempValue3|=TempValue4
					if TempValue3!=0
						Object.XVelocity=Object[ArrayPos0].XVelocity
						Object.Speed=Object[ArrayPos0].Speed
						Object[ArrayPos0].XVelocity=TempValue0
						Object[ArrayPos0].Speed=TempValue2
					endif
					break
				case 1
					if Object.XPos<Object[ArrayPos0].XPos
						Object.Speed-=0xC00
						Object.XVelocity-=0xC00
						Object[ArrayPos0].Speed+=0xC00
						Object[ArrayPos0].XVelocity+=0xC00
						Object[ArrayPos0].Value5+=0xC00
					else
						Object.Speed+=0xC00
						Object.XVelocity+=0xC00
						Object[ArrayPos0].Speed-=0xC00
						Object[ArrayPos0].XVelocity-=0xC00
						Object[ArrayPos0].Value5-=0xC00
					endif
				case 4
					CheckGreater(TempValue1,0)
					TempValue3=CheckResult
					CheckLower(Object.YPos,Object[ArrayPos0].YPos)
					TempValue3&=CheckResult
					CheckLower(TempValue1,0)
					TempValue4=CheckResult
					CheckGreater(Object.YPos,Object[ArrayPos0].YPos)
					TempValue4&=CheckResult
					TempValue3|=TempValue4
					if TempValue3!=0
						Object.YVelocity=Object[ArrayPos0].YVelocity
						Object[ArrayPos0].YVelocity=TempValue1
					endif
					break
				endswitch
				PlayerObjectCollision(C_TOUCH,ArrayPos0,-14,TempValue6,14,TempValue7,Object.EntityNo,-14,-14,14,14)
				if CheckResult==1
					if Object.XPos<Object[ArrayPos0].XPos
						Object.XPos-=0x10000
					else
						Object.XPos+=0x10000
					endif
					if Object.YPos<Object[ArrayPos0].YPos
						Object.YPos-=0x10000
					else
						Object.YPos+=0x10000
					endif
				endif
			endif
			break
		case 53
			switch Object[ArrayPos0].State
			case 0
				TempValue0=Object.YVelocity
				PlayerObjectCollision(C_BOX,ArrayPos0,-16,-16,16,16,Object.EntityNo,-14,-14,14,14)
				Object.YVelocity=TempValue0
				if CheckResult==1
					Object.Gravity=GRAVITY_AIR
					TempValue0=0
					TempValue1=0
					while TempValue0<16
						CreateTempObject(TypeName[GasBreakBlock],0,Object[ArrayPos0].XPos,Object[ArrayPos0].YPos)
						GetArrayValue(Object[TempObjectPos].Frame,TempValue0,GasBreakBlock_array43)
						GetArrayValue(TempValue2,TempValue1,GasBreakBlock_array44)
						GetArrayValue(Object[TempObjectPos].XVelocity,TempValue1,GasBreakBlock_array45)
						TempValue1++
						GetArrayValue(TempValue3,TempValue1,GasBreakBlock_array44)
						GetArrayValue(Object[TempObjectPos].YVelocity,TempValue1,GasBreakBlock_array45)
						TempValue1++
						Object[TempObjectPos].XPos+=TempValue2
						Object[TempObjectPos].YPos+=TempValue3
						Object[TempObjectPos].State=2
						Object[TempObjectPos].DrawOrder=5
						TempValue0++
					loop
					Object[ArrayPos0].State++
					if Object[ArrayPos0].Priority!=PRIORITY_XBOUNDS_DESTROY
						Object[ArrayPos0].Priority=PRIORITY_ACTIVE
					endif
					PlaySfx(SFXName[BlockBreak],0)
				endif
				break
			case 1
				if Object.State==0
					PlayerObjectCollision(C_TOUCH,ArrayPos0,-8,-4,8,4,Object.EntityNo,-10,-14,10,14)
					if CheckResult==1
						Object.State=1
						Object.XPos=Object[ArrayPos0].XPos
						Object.YPos=Object[ArrayPos0].YPos
						if Object[ArrayPos0].PropertyValue==0
							Object.XVelocity=0
							Object.YVelocity=-0x80000
						else
							Object.XVelocity=0x80000
							Object.YVelocity=0
						endif
						PlaySfx(SFXName[Rolling],0)
					endif
				endif
				break
			endswitch
			break
		case 22
			Object[ArrayPos0].Value2=Object[ArrayPos0].YPos
			Object[ArrayPos0].Value2-=0x300000
			TempValue2=Object[ArrayPos0].Value2
			TempValue2+=0x80000
			PlayerObjectCollision(C_BOX,ArrayPos0,-32,-24,32,32,Object.EntityNo,-10,-14,10,14)
			PlayerObjectCollision(C_BOX,ArrayPos0,-16,-40,16,-24,Object.EntityNo,-10,-14,10,14)
			if Object[ArrayPos0].State==0
				if CheckResult==1
					Object[ArrayPos0].State=1
					Stage.TimeEnabled=0
					if PlayerObject_staticVar3==1
						PlayerObject_staticVar3=2
					endif
					Object[ArrayPos0].XVelocity=0x80000
					Object[ArrayPos0].YVelocity=-0x40000
					Object[ArrayPos0].Value3=Object[ArrayPos0].XPos
					Object[ArrayPos0].Value4=Object[ArrayPos0].YPos
					CreateTempObject(TypeName[SmokePuff],0,Object[ArrayPos0].XPos,Object[ArrayPos0].YPos)
					Object[TempObjectPos].YPos-=0x180000
					PlaySfx(SFXName[Destroy],0)
				endif
			endif
			PlayerObjectCollision(C_TOUCH,ArrayPos0,-15,-48,15,-24,Object.EntityNo,-10,-14,10,14)
			if CheckResult==1
				TempValue0=Object.CollisionBottom
				TempValue0<<=16
				TempValue0+=Object.YPos
				if TempValue0>Object[ArrayPos0].Value2
					if TempValue0<=TempValue2
						Object[ArrayPos0].Value2=TempValue0
					endif
				endif
			endif
			break
		case 14
		case 18
		case 19
		case 20
		case 21
		case 23
		case 24
		case 25
		case 26
		case 27
		case 28
		case 29
		case 30
		case 31
		case 32
		case 33
		case 34
		case 37
		case 38
		case 39
		case 40
		case 41
		case 42
		case 47
		case 48
		case 49
		case 54
		case 59
		case 61
		case 62
		case 63
		case 64
		endswitch
	floop
	if Object.Value15!=0
		ArrayPos0=Object.Value15
		if Object[ArrayPos0].State==4
			if Object[ArrayPos0].Value6==1
				Object.State=0
				Object.Gravity=GRAVITY_AIR
				Object.TileCollisions=1
			endif
			Object.Visible=1
			Object.Value0=0
			Object.Speed=Object[ArrayPos0].XVelocity
			Object.XVelocity=Object[ArrayPos0].XVelocity
			Object.YVelocity=Object[ArrayPos0].YVelocity
		endif
	endif
	TempValue1=Object.XPos
	TempValue1>>=16
	TempValue2=Object.YPos
	TempValue2>>=16
	TempValue2+=6
	Get16x16TileInfo(TempValue0,TempValue1,TempValue2,TILEINFO_ANGLEB)
	switch TempValue0
	case 1
		if Object.YVelocity>-1
			Object.Gravity=GRAVITY_GROUND
			Object.YVelocity=0
			Object.YPos+=0x10000
		endif
		TempValue0=Object.Speed
		TempValue0>>=5
		Object.Speed-=TempValue0
		break
	case 3
		break
	case 5
		break
	case 2
	case 4
	endswitch
	if Object.State==0
		CallFunction(CheckeredBall_Function139)
		TempValue0=Object.Value12
		TempValue0|=Object.Value13
		if TempValue0!=0
			foreach TypeGroup[256],PlayerObjectPos
				PlayerObjectCollision(C_TOUCH,Object.EntityNo,-2,-2,2,2,PlayerObjectPos,0x10000,0x10000,0x10000,0x10000)
				if CheckResult==0
					PlayerObjectCollision(C_BOX,Object.EntityNo,-14,-14,14,14,PlayerObjectPos,0x10000,0x10000,0x10000,0x10000)
					if CheckResult==1
						Object[PlayerObjectPos].XPos+=Object.Value12
						Object[PlayerObjectPos].YPos+=Object.Value13
					endif
				endif
			floop
			Object.XPos+=Object.Value12
			Object.YPos+=Object.Value13
			Object.Value12=0
			Object.Value13=0
		endif
	endif
	if Object.OutOfBounds==1
		TempValue0=Object.XPos
		TempValue1=Object.YPos
		Object.XPos=Object.Value7
		Object.YPos=Object.Value8
		if Object.OutOfBounds==1
			Object.Value1=Object.XPos
			Object.Value2=Object.YPos
			Object.XVelocity=0
			Object.YVelocity=0
			Object.Speed=0
			Object.Value11=0
			Object.Value4=0
			Object.Value10=0
			Object.Value3=0
			Object.Value5=0
			Object.Value6=0
			Object.Priority=PRIORITY_ACTIVE_BOUNDS
			Object.State=0
		else
			Object.XPos=TempValue0
			Object.YPos=TempValue1
		endif
	endif
	Object.Value1=Object.XPos
	Object.Value1&=-0x10000
	Object.Value2=Object.YPos
	Object.Value2&=-0x10000
endsub


sub ObjectDraw
	Object.Rotation=Object.Value3
	Object.Rotation>>=14
	TempValue0=Object.Rotation
	TempValue0+=8
	TempValue0>>=4
	TempValue0&=7
	TempValue0++
	DrawSprite(TempValue0)
	Object.InkEffect=INK_ADD
	Object.Alpha=160
	DrawSpriteFX(0,FX_INK,Object.XPos,Object.YPos)
endsub


sub ObjectStartup
	LoadSpriteSheet("OOZ/Objects.gif")
	SpriteFrame(-16,-16,32,32,396,190)
	SpriteFrame(-16,-16,32,32,429,190)
	SpriteFrame(-16,-16,32,32,273,133)
	SpriteFrame(-16,-16,32,32,322,100)
	SpriteFrame(-16,-16,32,32,289,100)
	SpriteFrame(-16,-16,32,32,256,100)
	SpriteFrame(-16,-16,32,32,256,67)
	SpriteFrame(-16,-16,32,32,256,34)
	SpriteFrame(-16,-16,32,32,256,1)
	LoadAnimation("WreckingBallJr.ani")
	foreach TypeName[CheckeredBall],ArrayPos0
		Object[ArrayPos0].Gravity=GRAVITY_AIR
		Object[ArrayPos0].Value7=Object.XPos
		Object[ArrayPos0].Value8=Object.YPos
	floop
	SetArrayValue(65,DebugMode_staticVar25,DebugMode_array12)
	SetArrayValue(136,DebugMode_staticVar25,DebugMode_array13)
	SetArrayValue(137,DebugMode_staticVar25,DebugMode_array11)
	DebugMode_staticVar25++
endsub

sub RSDK
	LoadSpriteSheet("Global/Display.gif")
	SetEditorIcon(Icon0,SingleIcon,-16,-16,32,32,1,143)
endsub
