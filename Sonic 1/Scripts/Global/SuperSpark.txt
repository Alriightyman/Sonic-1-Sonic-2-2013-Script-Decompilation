//--------------------Sonic 1 / Sonic 2 SuperSpark Script--------------------//
//--------Scripted by Christian Whitehead 'The Taxman' & Simon Thomley 'Stealth'--------//
//-----------------Unpacked By Rubberduckycooly's Script Unpacker-----------------------//

//-------Aliases-------//
#alias 33: TYPE_SUPERSPARK




sub ObjectMain
	if Object.PropertyValue==0
		Object.XPos=Object[PlayerObjectCount].XPos
		Object.YPos=Object[PlayerObjectCount].YPos
	endif
	switch Object.State
	case 0
		if Object[PlayerObjectCount].Value42==0
			TempValue0=Object[PlayerObjectCount].Speed
			Absolute(TempValue0)
			if TempValue0>=0x80000
				Object.DrawOrder=-1
				Object.Value0=0
				Object.Frame=0
				Object.State++
			endif
		endif
		break
	case 1
		Object.Value0++
		if Object.Value0>=3
			Object.Value0=1
			Object.Frame++
			if Object.Frame>=2
				Object.State++
			endif
		endif
		break
	case 2
		Object.Value0++
		if Object.Value0>=3
			Object.Value0=1
			Object.Frame--
			if Object.Frame<=0
				Object.State++
			endif
		endif
		break
	case 3
		Object.Value0++
		if Object.Value0>=3
			Object.Value0=9
			Object.State++
		endif
		break
	case 4
		if Object.PropertyValue==1
			Object.Type=TypeName[BlankObject]
		endif
		Object.Value0++
		if Object.Value0>=13
			TempValue0=Object[PlayerObjectCount].Speed
			Absolute(TempValue0)
			CheckLower(TempValue0,0x80000)
			TempValue0=CheckResult
			CheckEqual(Object[PlayerObjectCount].Value42,0)
			TempValue0&=CheckResult
			if TempValue0==1
				Object.State=0
			else
				Object.Value0=0
				CreateTempObject(TypeName[SuperSpark],1,Object[PlayerObjectCount].XPos,Object[PlayerObjectCount].YPos)
				Object[TempObjectPos].Frame=0
				Object[TempObjectPos].State=1
				Object[TempObjectPos].DrawOrder=Object[PlayerObjectCount].Value18
			endif
		endif
		break

	endswitch
endsub


sub ObjectDraw
	switch Object.State
	case 1
	case 2
	case 3
		DrawSprite(Object.Frame)
		break

	endswitch
endsub


sub ObjectStartup
	LoadSpriteSheet("Global/Items3.gif")
	SpriteFrame(-8,-8,16,16,168,158)
	SpriteFrame(-16,-16,32,32,50,223)
	SpriteFrame(-24,-24,48,48,1,207)
endsub

sub RSDK
	LoadSpriteSheet("Global/Display.gif")
	SetEditorIcon(Icon0,SingleIcon,-16,-16,32,32,1,143)
endsub
