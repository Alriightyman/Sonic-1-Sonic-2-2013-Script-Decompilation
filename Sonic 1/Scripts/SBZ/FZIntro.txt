//--------------------Sonic 1 / Sonic 2 FZ Intro Script--------------------//
//--------Scripted by Christian Whitehead 'The Taxman' & Simon Thomley 'Stealth'--------//
//-----------------Unpacked By Rubberduckycooly's Script Unpacker-----------------------//

//-------Aliases-------//
#alias 75: TYPE_FZINTRO




sub ObjectMain
	switch Object.State
	case 0
		TileLayer[2].ScrollPos=0x800000
		HParallax[0].ScrollPos=-0x800000
		if recAnimation!=0
			TempValue0=recAnimation
			PlayerObjectPos=0
			while PlayerObjectPos<PlayerObjectCount
				Object[PlayerObjectPos].XPos=Object.XPos
				Object[PlayerObjectPos].YPos=Object.YPos
				CreateTempObject(TypeName[FZIntro],0,Object.XPos,Object.YPos)
				Object[TempObjectPos].State=1
				Object[TempObjectPos].Value0=PlayerObjectPos
				Object[TempObjectPos].Direction=TempValue0
				Object[TempObjectPos].Direction&=255
				TempValue0>>=8
				Object[TempObjectPos].Animation=TempValue0
				Object[TempObjectPos].Animation&=255
				TempValue0>>=8
				Object[PlayerObjectPos].YVelocity=-0x80000
				Object[PlayerObjectPos].Gravity=GRAVITY_AIR
				Object[PlayerObjectPos].State=PlayerObject_HandleAir
				PlayerObjectPos++
			loop
			recAnimation=0
		endif
		Object.Type=TypeName[BlankObject]
		TempValue0=Stage.NewYBoundary2
		TempValue0-=Screen.YSize
		Stage.NewYBoundary1=TempValue0
		break
	case 1
		PlayerObjectPos=Object.Value0
		Object[PlayerObjectPos].Direction=Object.Direction
		Object[PlayerObjectPos].Animation=Object.Animation
		if Object[PlayerObjectPos].Animation==ANI_JUMPING
			Object[PlayerObjectPos].State=PlayerObject_HandleAir
			Object.State=2
		endif
		if Object[PlayerObjectPos].Animation==ANI_FLYING
			Object[PlayerObjectPos].State=PlayerObject_HandleTailsFlight
			Object[PlayerObjectPos].Value26=0x800
			Object[PlayerObjectPos].YVelocity>>=2
			Object.State=2
		endif
		if Object[PlayerObjectPos].Animation==ANI_GLIDING
			if Object[PlayerObjectPos].Direction==FLIP_X
				Object[PlayerObjectPos].State=PlayerObject_KnuxGlideLeft
			else
				Object[PlayerObjectPos].State=PlayerObject_KnuxGlideRight
			endif
			Object.State=2
		endif
		if Object[PlayerObjectPos].Animation==ANI_GLIDING_DROP
			Object[PlayerObjectPos].State=PlayerObject_KnuxGlideDrop
			Object.State=2
		endif
		if Object.State!=2
			Object[PlayerObjectPos].State=PlayerObject_HandleAir
			Object[PlayerObjectPos].Direction=FLIP_NONE
			Object[PlayerObjectPos].Animation=ANI_BOUNCING
			Object.State=2
		endif
		break
	case 2
		Object.Type=TypeName[BlankObject]
		break
	endswitch
endsub

sub RSDK
	LoadSpriteSheet("Global/Display.gif")
	SetEditorIcon(Icon0,SingleIcon,-16,-16,32,32,1,143)
endsub
